# 錯誤考題回顧

上次編輯時間: 2025年11月15日 下午6:19
建立時間: 2025年11月7日 下午1:38

### 1.1.7

14

![image.png](assets/image%2089.png)

### 1.2.4

| 層次 | 功能重點 | 關鍵詞 | 對應設備 |
| --- | --- | --- | --- |
| 第1層 物理層 | 比特傳輸、機械/電氣/規程特性 | 透明傳輸、電氣特性、比特錯誤 | 集線器（Hub） |
| 第2層 數據鏈路層 | 成幀、差錯檢測（FCS）、流量控制 | MAC地址、幀頭幀尾 | 交換機（Switch） |
| 第3層 網路層 | 路由選擇、分組轉發 | IP地址、邏輯尋址、路由 | 路由器（Router） |
| 第4層 傳輸層 | 端到端通信、可靠傳輸、流量控制、分段重組 | TCP/UDP、端口號 | —— |
| 第5層 會話層 | 對話管理、檢查點(同步點)、恢復通信 | 斷點續傳、session | —— |
| 第6層 表示層 | 數據格式轉換、加密、壓縮 | 編碼、解碼、格式轉換 | —— |
| 第7層 應用層 | 為用戶提供網絡服務介面 | 文件傳輸、電子郵件、Web | —— |

| 題目類型 | 正確答案 | 記憶方法 / 關鍵點 |
| --- | --- | --- |
| 功能需由應用層相鄰層實現 →？ | 表示層 | 應用層相鄰層 = 表示層（數據格式轉換、壓縮） |
| 對話管理層是哪層？ | 會話層 | “會話=Session”就是對話管理 |
| 路由選擇功能層是哪層？ | 網路層 | Route → Network |
| 端到端的應答 / 分組排序 / 流量控制 | 傳輸層 | 端到端 = 傳輸層（process↔process） |
| 同時提供無連接與面向連接服務 | 網路層 | OSI模型的特點；TCP/IP則在傳輸層提供兩種 |
| 插入同步點以避免重傳整個文件 | 會話層 | 檢查點機制、斷點續傳 |
| 數據格式轉換與壓縮 | 表示層 | 處理資料的「形式」不是封裝 |
| 各層差錯例子：比特翻轉 / 序號錯誤 / 指令錯誤 | 物理層 / 數據鏈路層 / 應用層 | 比特錯→物理；幀錯→鏈路；指令錯→應用 |
| 自下而上首個端到端服務 | 傳輸層 | Transport層開始有端口 |
| 提供流量控制的層 | 數據鏈路層、傳輸層、網路層 | 1層無，5層以上無 |
| 為網路層提供服務的層 | 數據鏈路層 | 下層為上層服務 |
| 為會話層提供服務的層 | 傳輸層 | “物聯網書會適用”助記：物(1)聯(2)網(3)書(4)會(5)適(6)用(7) |
| 同步點 / 檢驗點恢復通信 | 會話層 | “檢查點”=Session功能 |
| 提供路由功能的層 | 網路層 | —— |
| 傳輸層提供的通信性質 | 端到端、進程對進程 | —— |
| OSI模型下不參與封裝的層 | 嚴格說物理層（僅傳輸比特流） | 有教材視表示層也“處理但不封裝” |
| 傳輸效率計算（400字節+5層×20開銷） | 400 / (400+100)=80% | 公式：有效負載 ÷ 總長度 |
| 第五層（自下而上）主要功能 | 會話管理 | 第5層=會話層 |
| TCP/IP中處理可靠性與流量控制的層 | 傳輸層 | TCP包含可靠傳輸、重傳、流控、錯誤校正 |
| 各層服務訪問點（SAP） | 應用層=用戶介面；傳輸層=端口號；網路層=IP地址；數據鏈路層=MAC地址 | “由上而下：人→程→主→網卡” |
| 不屬於網絡體系結構描述內容 | 協議內部實現細節 | 結構只定義層次與功能，不管具體算法 |
| 互聯網核心技術 | TCP/IP | OSI是理論，TCP/IP是實際 |

### 2.1.4

- 有給K需要考慮兩個公式
    
    🧪 1. 奈奎斯特定理（無雜訊情況）
    
    💡 結論一：極限波特率
    
    $\boxed{速率 = 2W} \quad \text{(單位：波特，Baud)}$
    
    💡 結論二：極限**比特率**
    
    $\boxed{速率 = 2W \log_2 K} \quad \text{(單位：bit/s)}$
    
    其中 K：一個碼元可表示的狀態數（例如 2 進制時 K=2）
    
    ---
    
    🧠 2. 香農定理（有雜訊情況）
    
    💡 香農公式（極限比特率）：
    
    $\boxed{速率 = W \log_2 (1 + S/N)} \quad \text{(單位：bit/s)}$
    
- 分貝=$10log_{10}(S/N)$
    
    🔊 3. 信噪比 S/N
    
    - **信噪比（S/N）**：$(信號功率 / 雜訊功率)$
    - **分貝計算（dB）**：
        
        $\boxed{10 \log_{10}(S/N)}$
        
    
    ---
    
- 帶寬=上限頻率-下限頻率

### 3.4.3

![image.png](assets/image%2090.png)

![N為窗口大小](assets/image%2091.png)

N為窗口大小

GBN 窗口大小選擇 $W_t =2^k-1$

SR 窗口大小選擇  $W_t+W_r ≤ 2^k$

$W_t≤2^{k-1}$

### 3.5.4

- **流程**：監聽→發送→若碰撞→**發 Jam 信號(約32bits)**→**二進位指數退避**：第 k 次碰撞在區間 $[0,2^m-1]$ 隨機選 $m=\min(k,10)$ 個時隙（每隙 512 bit-times），**第 16 次**仍碰撞 ⇒ **放棄**本幀、上報上層（網路層/主機）。
    
    <aside>
    💡
    
    ex
    
    ![image.png](assets/image%2011.png)
    
    答案：B. 15.36 μs
    
    理由：以太網 CSMA/CD 的二進位指數退避中，時隙為 512 bit-times。
    
    在 100 Mb/s 下，1 bit = 10 ns ⇒ 512 bit-times = 5.12 μs。
    
    「第二次重傳」代表已發生 2 次碰撞，k=2，退避範圍為 [0, 2²−1] = [0,3] 個時隙；最大退避＝3×5.12 μs＝**15.36 μs**。
    
    </aside>
    
    ![image.png](assets/image%2092.png)
    
    <aside>
    💡
    
    ans
    
    已知：
    
    - DIFS = 128 μs
    - SIFS = 28 μs
    - RTS 傳輸延遲 = 3 μs
    - CTS 傳輸延遲 = 2 μs
    - ACK 傳輸延遲 = 2 μs
    - 資料幀長度 = 1998 B
    - 無線速率 = 54 Mb/s
    
    忽略傳播延遲。
    
    問：隱藏站 **B 收到 CTS 時**，設定的 NAV 值是多少？
    
    ---
    
    ## 💡 一、理解 NAV 含義
    
    B 聽到 **CTS** 表示：
    
    > AP 已允許 A 傳輸，因此 B 必須等到 A 完整傳完資料、AP 回 ACK 才能再發。
    > 
    
    因此 NAV ＝ 之後整個「資料交換序列」所需的時間。
    
    ---
    
    ## 🧭 二、NAV 包含的時間段
    
    對於聽到 CTS 的隱藏站 B：
    
    ```
    NAV = [Data 傳輸時間] + SIFS + [ACK 時間]
    
    ```
    
    （RTS、CTS、DIFS 都是 CTS 之前發生的，B 已經聽到了 CTS 才開始計 NAV。）
    
    ---
    
    ## 📐 三、逐步計算
    
    ### 1️⃣ Data 傳輸時間
    
    資料長度 = 1998 B = 1998 × 8 = 15984 bits
    
    速率 = 54 Mb/s = 54 × 10⁶ bit/s
    
    →$T_{DATA} = \frac{15984}{54×10^6} = 296 μs$
    
    ---
    
    ### 2️⃣ ACK 時間
    
    給定傳輸延遲 = 2 μs
    
    ---
    
    ### 3️⃣ NAV 總和
    
    $NAV = T_{DATA} + SIFS + T_{ACK}= 296 + 28 + 2 = 326 μs$
    
    ---
    
    ✅ **答案：A. 326 μs**
    
    ---
    
    ## 📘 補充說明
    
    若題目改成「聽到 RTS」的隱藏站，則：
    
    $NAV = CTS + SIFS + DATA + SIFS + ACK + SIFS$
    
    因為整個通訊過程都還沒開始。
    
    但此題特別說「收到 CTS」，因此只需考慮之後的階段。
    
    </aside>
    

### 3.6.5

![image.png](assets/image%2093.png)

| 狀況 | 意義 | To DS | From DS | 傳輸方向 | 判斷方法 |
| --- | --- | --- | --- | --- | --- |
| **STA → AP** | 往 DS 傳資料 | 1 | 0 | 「去 AP」 | 主機（Host）把資料傳給 AP → 進入分配系統 |
| **AP → STA** | 從 DS 傳資料 | 0 | 1 | 「來 AP」 | AP 從有線網送出資料 → 給主機（Host） |
| **AP ↔ AP** | DS 間橋接 | 1 | 1 | 無線分配系統（WDS） | AP 間的無線骨幹（少考） |
| **Ad-hoc 模式** | 無 DS | 0 | 0 | STA ↔ STA 直連 | 沒有 AP 參與（點對點） |

### 4.2.8

![image.png](assets/image%2094.png)

![注意特殊用途地址](assets/image%2095.png)

注意特殊用途地址

![image.png](assets/image%2096.png)

答案：**C. 192.168.32.17**

**原因：** 互聯網路由器不轉發 **私有位址（RFC1918）**：

- 10.0.0.0/8
- **172.16.0.0/12（172.16.0.0–172.31.255.255）**
- **192.168.0.0/16**

選項中只有 **192.168.32.17 ∈ 192.168.0.0/16**，屬於私有位址，需經 NAT 才能上網；其餘 A（192.172.56.23）、B（172.15.34.128 不在 172.16–31）、D（172.128.45.34）皆非私有段，可被正常轉發。

![image.png](assets/image%2097.png)

✅ **答案：C. 74.178.247.96/28**

---

已經分配了一個子網：`74.178.247.96/29`

問：哪個子網「不能再分給其他子網」，也就是——**這個子網已經被包含在上級子網中**。

---

🧩 一、先看 /29 的範圍

- 網段：`74.178.247.96/29`
- /29 ⇒ 子網位元數 = 29
- 可用位址數：2³ = 8
- 網路位址：74.178.247.96
- 廣播位址：74.178.247.103
    
    → 範圍是 **96–103**
    

---

🧮 二、看選項

| 選項 | 網段 | 範圍 | 是否包含 74.178.247.96/29？ |
| --- | --- | --- | --- |
| A | 74.178.247.120/29 | 120–127 | ❌ 不重疊 |
| B | 74.178.247.64/29 | 64–71 | ❌ 不重疊 |
| **C** | **74.178.247.96/28** | **96–111** | ✅ **包含 74.178.247.96/29** |
| D | 74.178.247.104/29 | 104–111 | ✅ 與 /29 毗鄰但不重疊 |

---

💡 結論

`74.178.247.96/29` 是 `74.178.247.96/28` 的一部分，

所以 `/28` 已經「包含」了 `/29」，不能再獨立分配。

---

🧠 速記口訣：

> 掩碼越小，網越大；被包含就不能再分。
> 

![image.png](assets/image%2098.png)

**答案：B. 255.255.252.0 (/22)**

**理由：**

- 需子網數：已有 35，未來 +16 ⇒ **至少 51**。
- 每子網主機數 ≈ 800 ⇒ 需要主機位 **h** 使 $(2^h-2 \ge 800)$。
    - 取 **h = 10**（$(2^{10}-2=1022) ≥ 800$）。
- B 類原本主機位 16，若保留 10 給主機，則可借用 **6 位做子網**：
    - 子網數 $(2^6=64 \ge 51)$ ✅
    - 前綴長度：(16+6=22) ⇒ **/22 = 255.255.252.0**

對比選項：

- A (/21)：子網位 5 → 32 個子網（不足）
- C (/23)：主機位 9 → 510 主機（不足）
- D (/24)：主機位 8 → 254 主機（不足）

![image.png](assets/image%2099.png)

- 解析
    
    ✅ **正確答案：C. 192.168.6.128/26**
    
    ---
    
    ### 🧩 題目意思
    
    我們要找一個「**不與 192.168.6.192/26 重疊**」
    
    且「**聚合後不會引入多餘地址**」的網段。
    
    也就是：這兩個 /26 子網能**剛好合併成一個更大的上層網段**（不浪費地址）。
    
    ---
    
    ### 🧮 逐步分析
    
    ### 1️⃣ 先看給定網段
    
    ```
    192.168.6.192/26
    → 網段範圍：192.168.6.192 ~ 192.168.6.255
    → 子網大小：64 個地址
    
    ```
    
    ---
    
    ### 2️⃣ /26 的相鄰網段每 64 個地址為一段
    
    | 子網 | 範圍 |
    | --- | --- |
    | 192.168.6.0/26 | 0–63 |
    | 192.168.6.64/26 | 64–127 |
    | 192.168.6.128/26 | 128–191 |
    | **192.168.6.192/26** | **192–255** |
    
    ---
    
    ### 3️⃣ 找與它「相鄰且可聚合」的網段
    
    - 若兩個 /26 合併為 /25，需要：
        - 第一個網段的起始位（低 1 bit）為 0；
        - 第二個為下一段（高 1 bit 為 1）。
    
    對於 192.168.6.192/26，
    
    前一個子網是 **192.168.6.128/26**。
    
    ---
    
    ### 4️⃣ 合併檢查
    
    ```
    192.168.6.128/26 → 128–191
    192.168.6.192/26 → 192–255
    合併後 → 192.168.6.128/25（128–255）
    
    ```
    
    ✅ 剛好連接，沒有多餘位址，也沒有重疊錯亂。
    
    ---
    
    ### 🧠 結論
    
    - A. /25：範圍太大（0–127）→ 引入多餘地址 ❌
    - B. /26：完全重疊 ❌
    - **C. 192.168.6.128/26 → 完美相鄰，可聚合 ✅**
    - D. /27：範圍太小，且在 /26 內部 ❌
    
    ---
    
    ✅ **最終答案：C. 192.168.6.128/26**
    

![image.png](assets/image%20100.png)

- NAT
    
    ---
    
    ## 🌐 NAT 轉換原理整理
    
    ### 🔹 基本功能：**SNAT（Source NAT，源位址轉換）**
    
    **方向：內網 → 外網（出站，Outbound）**
    
    - ✅ **自動發生**
    - ✅ **目的：**讓多台內網設備共用同一個「外部 IP」對外上網
    - ✅ **常見場景：**家用路由器讓所有手機、筆電共用一個公網 IP 上網
    - ✅ **別名：**「IP 分享」、「多對一 NAT」
    - 🧠 **運作機制：**
        - 將封包的 **來源 IP（Source IP）** 改成路由器的外部 IP
        - 同時在 NAT 表記錄來源內部位址，以便回覆時能找到原主機
    
    📘 範例
    
    > 192.168.0.10 → (NAT) → 公網 IP 203.66.1.5
    > 
    > 
    > 外部網站回封包 → 路由器查表 → 還原給 192.168.0.10
    > 
    
    ---
    
    ### 🔹 擴充功能：**DNAT（Destination NAT）／Port Mapping（通訊埠轉發）**
    
    **方向：外網 → 內網（入站，Inbound）**
    
    - ⚙️ **需手動設定**
    - ✅ **目的：**讓外部使用者能透過指定埠號，訪問內網特定主機服務
    - ✅ **常見場景：**從外部 SSH / RDP / HTTP 連入家中或公司伺服器
    - ✅ **別名：**「Port Forwarding」、「一對一 NAT」
    - 🧠 **運作機制：**
        - 路由器根據埠號規則，將**目的 IP / Port** 改成內部伺服器的 IP / Port
    
    📘 範例
    
    > 外部 ssh 連線到 203.66.1.5:22
    > 
    > 
    > → 路由器轉發到內部 192.168.0.10:22
    > 
    
    ---
    
    ## 🔸 對比總表
    
    | 功能 | 類型 | 流向 | 是否自動 | 使用目的 | 關鍵轉換欄位 |
    | --- | --- | --- | --- | --- | --- |
    | **SNAT** | 出站 NAT | 內網 → 外網 | ✅ 自動 | 內網共享外部 IP | 改「來源 IP」 |
    | **DNAT / Port Mapping** | 入站 NAT | 外網 → 內網 | ⚙️ 手動 | 外部訪問內部伺服器 | 改「目的 IP」 |
    
    ---
    
    🧩 **口訣**
    
    > 「內出外靠 SNAT，自外進靠 DNAT；出站自動、入站手動。」
    > 

![image.png](assets/image%20101.png)

- 解答
    
    # 🎯 這題要求：**Which of the following is wrong?（哪一個是錯的？）**
    
    但（E）寫的是：
    
    > all of the above are correct
    > 
    > 
    > （如果 A/B/C/D 全部都正確，那選我）
    > 
    
    而題目給的答案就是 **(E)**。
    
    👉 代表 **A/B/C/D 全部都「正確」**，沒有錯的選項。
    
    👉 因此「沒有任何一個是 wrong」→ 所以只能選 (E)。
    
    ---
    
    # 🔍 為什麼 A/B/C/D 都正確？（快速檢查）
    
    | 選項 | 敘述 | 是否正確 | 解釋 |
    | --- | --- | --- | --- |
    | (A) UDP is connectionless | ✔ 正確 | UDP 無連線、無握手 |  |
    | (B) UDP does not guarantee no duplication | ✔ 正確 | UDP 可能**重複封包** |  |
    | (C) UDP does not guarantee delivery | ✔ 正確 | UDP 不保證一定送到 |  |
    | (D) UDP does not guarantee order | ✔ 正確 | UDP 不保證順序 |  |
    
    全部都是 UDP 的特性 → 都正確 → 不是 wrong。
    
    ---
    
    # ⭐ 結論
    
    - A 正確
    - B 正確
    - C 正確
    - D 正確
    
    因此：
    
    > 沒有任何錯的 → 選 (E)
    > 
    
    ---
    
    如果你想，我也可以幫你整理一張
    
    **「TCP vs UDP 15 秒總整理＋考試常考敘述陷阱表」**
    
    讓你之後遇到判斷題都不會再被唬到。
    

![image.png](assets/image%20102.png)

![image.png](assets/image%20103.png)