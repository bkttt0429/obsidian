# æ¨¹

ä¸Šæ¬¡ç·¨è¼¯æ™‚é–“: 2025å¹´10æœˆ1æ—¥ ä¸‹åˆ3:03
å»ºç«‹æ™‚é–“: 2025å¹´7æœˆ24æ—¥ ä¸‹åˆ4:23

---

# ä¸€ã€æ¨¹

## æ¨¹çš„åŸºæœ¬æ¦‚å¿µ

**æ¨¹ï¼ˆTreeï¼‰æ˜¯ä¸€ç¨®éç·šæ€§è³‡æ–™çµæ§‹**ï¼Œä»¥**ç¯€é»ï¼ˆNodeï¼‰çµ„æˆï¼Œå…·æœ‰éšå±¤é—œä¿‚ï¼ˆå±¤ç´šé—œä¿‚ï¼‰**ã€‚

### ğŸ“Œ ç‰¹æ€§

-   æœ‰ä¸€å€‹**æ ¹ç¯€é»ï¼ˆRootï¼‰**ï¼Œæ˜¯æ•´æ£µæ¨¹çš„èµ·é»ã€‚
-   æ¯å€‹ç¯€é»å¯ä»¥æœ‰ 0 å€‹æˆ–å¤šå€‹**å­ç¯€é»ï¼ˆChildrenï¼‰**ã€‚
-   æ²’æœ‰å¾ªç’°ï¼ˆä¸æ§‹æˆå›åœˆï¼‰ã€‚
-   æœ€åº•éƒ¨çš„ç¯€é»ç¨±ç‚º**è‘‰ç¯€é»ï¼ˆLeafï¼‰**ï¼Œæ²’æœ‰å­ç¯€é»ã€‚

### ğŸŒ¿ æ¨¹çš„åŸºæœ¬è¡“èª

-   **ç¯€é»ï¼ˆNodeï¼‰**ï¼šè³‡æ–™å–®ä½ã€‚
-   **é‚Šï¼ˆEdgeï¼‰**ï¼šç¯€é»é–“çš„é€£ç·šã€‚
-   **é«˜åº¦ï¼ˆHeightï¼‰**ï¼šç¯€é»åˆ°è‘‰ç¯€é»çš„æœ€é•·è·é›¢ã€‚
-   **æ·±åº¦ï¼ˆDepthï¼‰**ï¼šç¯€é»åˆ°æ ¹ç¯€é»çš„è·é›¢ã€‚
-   **åº¦ï¼ˆDegreeï¼‰**ï¼šä¸€å€‹ç¯€é»çš„å­ç¯€é»æ•¸é‡ã€‚
-   **è‘‰ç¯€é»ï¼ˆLeafï¼‰**ï¼šæ²’æœ‰å­ç¯€é»çš„ç¯€é»ã€‚

---

## 3ç¨®å­˜å„²çµæ§‹

**1. çˆ¶è¦ªè¡¨ç¤ºæ³•: æŒ‡å‘è‡ªå·±çš„çˆ¶è¦ª**

**æ‰¾çˆ¶ç¯€é»æ–¹ä¾¿ï¼Œæ‰¾å­©å­ä¸æ–¹ä¾¿**
![treestorage.png](assets/treestorage.png)

**2. å­©å­è¡¨ç¤ºæ³•: çˆ¶è¦ªå­˜è‡ªå·±çš„å­©å­**

**æ‰¾å­©å­æ–¹ä¾¿ï¼Œæ‰¾çˆ¶ç¯€é»ä¸æ–¹ä¾¿**
![treestorage2.png](assets/treestorage2.png)

**3. å­©å­å…„å¼Ÿè¡¨ç¤ºæ³•: æŒ‡å‘è‡ªå·±çš„å­©å­å’Œå…„å¼Ÿ**
![treestorage3.png](assets/treestorage3.png)

---

## å¸¸è¦‹çš„æ¨¹ç¨®é¡

![image.png](assets/image%2010.png)

| é¡å‹ | èªªæ˜ |
| :--- | :--- |
| **æ™®é€šæ¨¹** | æ¯å€‹ç¯€é»å¯æœ‰ä»»æ„æ•¸ç›®çš„å­ç¯€é»ã€‚ |
| **äºŒå…ƒæ¨¹ï¼ˆBinary Treeï¼‰** | æ¯å€‹ç¯€é»æœ€å¤šæœ‰å…©å€‹å­ç¯€é»ï¼ˆå·¦å­ã€å³å­ï¼‰ã€‚ |
| **æ»¿äºŒå…ƒæ¨¹** | æ‰€æœ‰éè‘‰ç¯€é»éƒ½æœ‰å·¦å³å­ç¯€é»ã€‚ |
| **å®Œå…¨äºŒå…ƒæ¨¹** | é™¤äº†æœ€å¾Œä¸€å±¤ï¼Œå…¶é¤˜å±¤çš†æ»¿ï¼›æœ€å¾Œä¸€å±¤ç¯€é»é å·¦å°é½Šã€‚ |
| **å¹³è¡¡äºŒå…ƒæ¨¹ï¼ˆå¦‚ AVLï¼‰** | å·¦å³å­æ¨¹é«˜åº¦å·®æœ€å¤šç‚º1ã€‚ |
| **æœå°‹äºŒå…ƒæ¨¹ï¼ˆBSTï¼‰** | å·¦å°å³å¤§ï¼Œåˆ©æ–¼æŸ¥æ‰¾ã€‚ |
| [**å †ç©æ¨¹ï¼ˆHeapï¼‰**](æ’åº.md) | æœ€å¤§å †ï¼ˆçˆ¶ç¯€é»â‰¥å­ç¯€é»ï¼‰æˆ–æœ€å°å †ï¼ˆçˆ¶ç¯€é»â‰¤å­ç¯€é»ï¼‰ã€‚ |
| **Bæ¨¹ã€B+æ¨¹** | å¸¸ç”¨æ–¼è³‡æ–™åº«ç´¢å¼•ï¼Œé©åˆå¤§é‡è³‡æ–™å„²å­˜èˆ‡æŸ¥è©¢ã€‚ |

---

# äºŒã€Binary Tree äºŒå…ƒæ¨¹


> **å®šç¾©ï¼šæ¯å€‹ç¯€é»æœ€å¤šåªèƒ½æœ‰å…©å€‹å­ç¯€é»ï¼Œåˆ†åˆ¥ç¨±ç‚ºå·¦å­ç¯€é»ï¼ˆleft childï¼‰èˆ‡å³å­ç¯€é»ï¼ˆright childï¼‰**ã€‚

## ğŸ§© å¸¸è¦‹é¡å‹çš„äºŒå…ƒæ¨¹

| é¡å‹ | èªªæ˜ |
| :--- | :--- |
| **æ»¿äºŒå…ƒæ¨¹ (Full Binary Tree)** | æ‰€æœ‰ç¯€é»ä¸æ˜¯è‘‰ç¯€é»å°±æ˜¯æœ‰å…©å€‹å­ç¯€é»ã€‚ |
| **å®Œå…¨äºŒå…ƒæ¨¹ (Complete Binary Tree)** | é™¤äº†æœ€å¾Œä¸€å±¤ä¹‹å¤–éƒ½å¡«æ»¿ï¼Œæœ€å¾Œä¸€å±¤é å·¦å°é½Šï¼Œæœ€å¤šåªæœ‰ä¸€å€‹åº¦ç‚º1çš„é»ã€‚ |
| **å¹³è¡¡äºŒå…ƒæ¨¹ (Balanced Tree)** | ä»»æ„ç¯€é»çš„å·¦å³å­æ¨¹é«˜åº¦å·®ä¸è¶…é1ã€‚ |
| **äºŒå…ƒæœå°‹æ¨¹ (BST)** | å°ä»»ä¸€ç¯€é»ï¼Œå·¦å­æ¨¹ < ç¯€é» < å³å­æ¨¹ã€‚ |

---

## ğŸ’¡ äºŒå…ƒæ¨¹æ€§è³ªå½™æ•´ç­†è¨˜
é€™æ˜¯ä¸€ä»½å°‡æ‚¨çš„ Notion ç­†è¨˜èˆ‡è€ƒé¡Œç²¾è¯ã€æ•¸å­¸è­‰æ˜åˆä½µå¾Œçš„å…¨æ–¹ä½äºŒå…ƒæ¨¹æ€§è³ªç­†è¨˜ã€‚æˆ‘ç‚ºæ‚¨è£œå……äº†æ›´åš´è¬¹çš„å…¬å¼æ¨å°èˆ‡è€ƒè©¦å¸¸è¦‹çš„é™·é˜±ã€‚

### æ€§è³ª 1ï¼šç¬¬ $i$ å±¤çš„ç¯€é»åˆ†å¸ƒ
- æœ€å¤§ç¯€é»æ•¸ï¼šç¬¬ $i$ å±¤æœ€å¤šæœ‰ $2^{i-1}$ å€‹ç¯€é»ã€‚
- å½¢æ…‹è¨ˆæ•¸ï¼šè‹¥ä¸€æ£µé«˜åº¦ç‚º $n$ çš„äºŒå…ƒæ¨¹åªæœ‰ $n$ å€‹ç¯€é»ï¼ˆæ¯å±¤åƒ… 1 å€‹ï¼‰ï¼Œå…¶ä¸åŒå½¢æ…‹ç¸½æ•¸ç‚º $2^{n-1}$ã€‚

### æ€§è³ª 2ï¼šæ·±åº¦èˆ‡ç¸½ç¯€é»æ•¸çš„æ¥µå€¼
- æœ€å¤§å®¹é‡ï¼ˆæ»¿äºŒå…ƒæ¨¹ Full Binary Treeï¼‰ï¼šæ·±åº¦ç‚º $h$ çš„äºŒå…ƒæ¨¹æœ€å¤šæœ‰ $2^h - 1$ å€‹ç¯€é»ã€‚
- æœ€å°å®¹é‡ï¼šæ·±åº¦ç‚º $h$ çš„äºŒå…ƒæ¨¹æœ€å°‘æœ‰ $h$ å€‹ç¯€é»ï¼ˆé€€åŒ–ç‚ºéˆç‹€ï¼‰ã€‚
- ç­‰æ¯”ç´šæ•¸è­‰æ˜ï¼šç¸½ç¯€é»æ•¸ $S_h = 2^0 + 2^1 + \dots + 2^{h-1} = \frac{1(1-2^h)}{1-2} = 2^h - 1$ã€‚

### æ€§è³ª 3ï¼šç¯€é»æ•¸èˆ‡é«˜åº¦çš„è½‰æ›
- æœ€å°é«˜åº¦ï¼šå°æ–¼æœ‰ $n$ å€‹ç¯€é»çš„äºŒå…ƒæ¨¹ï¼Œå…¶æœ€å°é«˜åº¦ç‚º $\lceil \log_2(n+1) \rceil$ æˆ– $\lfloor \log_2 n \rfloor + 1$ã€‚
- æœ€å¤§é«˜åº¦ï¼šæœ€å£æƒ…æ³ä¸‹é«˜åº¦ç‚º $n$ã€‚

### æ€§è³ª 4ï¼šå®Œå…¨äºŒå…ƒæ¨¹ï¼ˆCBTï¼‰çš„ç´¢å¼•è¦å¾‹
ç•¶ä½¿ç”¨**é™£åˆ—ï¼ˆArrayï¼‰**å­˜å„²ï¼Œä¸”æ ¹ç¯€é»ç´¢å¼•ç‚º $1$ æ™‚ï¼š
- ç•¶å‰ç¯€é»ï¼šç´¢å¼•ç‚º $i$ã€‚
- å·¦å­ç¯€é»ï¼š$2i$ï¼ˆè‹¥ $2i > n$ å‰‡ç„¡å·¦å­©å­ï¼‰ã€‚
- å³å­ç¯€é»ï¼š$2i + 1$ï¼ˆè‹¥ $2i+1 > n$ å‰‡ç„¡å³å­©å­ï¼‰ã€‚
- çˆ¶ç¯€é»ï¼š$\lfloor i/2 \rfloor$ã€‚
- å±¤ç´šåˆ¤æ–·ï¼šç´¢å¼•ç‚º $p$ èˆ‡ $q$ çš„ç¯€é»åœ¨åŒä¸€å±¤çš„æ¢ä»¶æ˜¯ $\lfloor \log_2 p \rfloor = \lfloor \log_2 q \rfloor$ã€‚

### æ€§è³ª 5ï¼šç©ºæŒ‡æ¨™ï¼ˆNull Linkï¼‰å®šç†
- äºŒå‰éˆè¡¨ï¼šæœ‰ $n$ å€‹ç¯€é»çš„äºŒå…ƒæ¨¹ï¼Œå¿…æœ‰ $n+1$ å€‹ç©ºæŒ‡æ¨™ã€‚
- è­‰æ˜ï¼šç¸½æŒ‡æ¨™åŸŸç‚º $2n$ï¼Œå…¶ä¸­éç©ºæŒ‡æ¨™ç­‰æ–¼é‚Šæ•¸ $n-1$ï¼Œæ•…ç©ºæŒ‡æ¨™ $= 2n - (n-1) = n+1$ã€‚
- ä¸‰å‰éˆè¡¨ï¼šå¢åŠ æŒ‡å‘é›™è¦ªçš„æŒ‡æ¨™å¾Œï¼Œç©ºæŒ‡æ¨™æ•¸è®Šç‚º $n+2$ã€‚

### æ€§è³ª 6ï¼šåº¦æ•¸é—œä¿‚èˆ‡è‘‰ç¯€é»è¨ˆç®—
- æ ¸å¿ƒå®ˆæ†å…¬å¼ï¼š$n_0 = n_2 + 1$ã€‚
- é€šç”¨æ¨¹å…¬å¼ï¼šç¸½ç¯€é» $N = (\sum i \cdot N_i) + 1$ã€‚
- å¥‡å¶æ€§è¦å¾‹ï¼šè‹¥ç¸½ç¯€é»æ•¸ $N$ ç‚ºå¶æ•¸ï¼Œåº¦ç‚º 1 çš„ç¯€é»æ•¸ $n_1$ å¿…ç‚ºå¥‡æ•¸ã€‚
- å®Œå…¨äºŒå…ƒæ¨¹ç‰¹æœ‰ï¼šè‘‰ç¯€é»æ•¸ $n_0 = \lceil n/2 \rceil$ã€‚

### ğŸ’¡ è£œå……ï¼šå¤šå‰æ¨¹ï¼ˆ$m$-ary Treeï¼‰é€šç”¨è¨ˆç®—æŠ€å·§
å¦‚æœæ‚¨åœ¨ç­†è¨˜ä¸­é‡åˆ°é¡ä¼¼ $n_1 + 2n_2 + 3n_3 + 4n_4 = 122$ çš„é¡Œç›®ï¼š
- æ±‚ç¸½ç¯€é»æ•¸ $N$ï¼šç›´æ¥å°‡ã€Œç¸½åº¦æ•¸ã€åŠ  1ï¼Œå³ $122 + 1 = 123$ã€‚
- æ±‚è‘‰å­ç¯€é» $n_0$ï¼šåˆ©ç”¨ $n_0 = N - (n_1 + n_2 + n_3 + n_4)$ã€‚
---

## å„²å­˜çµæ§‹
-   **é †åºå„²å­˜çµæ§‹(Array-based)**
    ç”±å·¦è‡³å³ä¾åºå­˜å„²ï¼Œé©åˆ**å®Œå…¨äºŒå…ƒæ¨¹æˆ–æ»¿äºŒå…ƒæ¨¹**

    **å®Œå…¨äºŒå…ƒæ¨¹**

    ![æ ¹ç¯€é»æ”¾åœ¨ `a[1]`ï¼ˆæˆ– `a[0]`ï¼Œè¦–èªè¨€è€Œå®šï¼‰(ç¢ºä¿index ä¸€æ¨£ )](assets/btsa.png)

    æ ¹ç¯€é»æ”¾åœ¨ `a[1]`ï¼ˆæˆ– `a[0]`ï¼Œè¦–èªè¨€è€Œå®šï¼‰(ç¢ºä¿index ä¸€æ¨£ )

    **éå®Œå…¨äºŒå…ƒæ¨¹**

    ![è‹¥æ˜¯éå®Œå…¨äºŒå…ƒæ¨¹ï¼Œå­˜å„²æ™‚å°‡ç©ºç¯€é»è¨­ç‚º`Empty` ç¢ºä¿å¯ä»¥ä¿æŒé †åºçµæ§‹ã€‚](assets/btsa1.png)

    è‹¥æ˜¯éå®Œå…¨äºŒå…ƒæ¨¹ï¼Œå­˜å„²æ™‚å°‡ç©ºç¯€é»è¨­ç‚º`Empty` ç¢ºä¿å¯ä»¥ä¿æŒé †åºçµæ§‹ã€‚

-   **éˆçµå„²å­˜çµæ§‹ï¼ˆLinked Structureï¼‰**
    ```c
    typedef struct TreeNode {
        int data;
        struct TreeNode *left;
        struct TreeNode *right;
    } TreeNode
    ```
    ```
    ç¸½æŒ‡æ¨™æ¬„ä½æ•¸     -    å·²ç”¨æŒ‡æ¨™æ•¸é‡     =    ç©ºæŒ‡æ¨™æ¬„ä½æ•¸
         2n         -        (n - 1)     =         n + 1
    ```
    ![image.png](assets/image%2011.png)

---

## äºŒå…ƒæ¨¹çš„éæ­·ï¼ˆTraversalï¼‰
*ç›®æ¨™ï¼š**ä¾æŸç¨®é †åºæ‹œè¨ªæ¨¹ä¸­æ¯ä¸€å€‹ç¯€é»ä¸€æ¬¡ä¸”åƒ…ä¸€æ¬¡ã€‚*
### ğŸ“š ä¸€ã€æ·±åº¦å„ªå…ˆéæ­·ï¼ˆDFSï¼šDepth-First Searchï¼‰

**1ï¸âƒ£ å‰åºéæ­·ï¼ˆPreorderï¼‰ï¼šæ ¹ â†’ å·¦ â†’ å³**

è¨ªå•é †åºï¼šD â†’ L â†’ R

```c
void preorder(TreeNode* root) {
    if (root == NULL) return;
    visit(root);
    preorder(root->left);
    preorder(root->right);
}
```


**2ï¸âƒ£ ä¸­åºéæ­·ï¼ˆInorderï¼‰ï¼šå·¦ â†’ æ ¹ â†’ å³**

è¨ªå•é †åºï¼šL â†’ D â†’ R

- ğŸ“Œ å°æ–¼ **Binary Search Treeï¼ˆBSTï¼‰**ï¼Œ**ä¸­åºéæ­·çµæœæ˜¯éå¢æ’åºï¼**
```c
void inorder(TreeNode* root) {
    if (root == NULL) return;
    inorder(root->left);
    visit(root);
    inorder(root->right);
}
```


**3ï¸âƒ£ å¾Œåºéæ­·ï¼ˆPostorderï¼‰ï¼šå·¦ â†’ å³ â†’ æ ¹**

è¨ªå•é †åºï¼šL â†’ R â†’ D

```c
void postorder(TreeNode* root) {
    if (root == NULL) return;
    postorder(root->left);
    postorder(root->right);
    visit(root);
}
```

#### æ€§è³ªï¼šåˆ†ææœ€å¾Œè¢«è¨ªå•çš„ç¯€é»
-   **In-orderï¼ˆLDRï¼Œä¸­åºï¼‰**
    -   **æœ€å¾Œç¯€é»**ï¼é€™æ£µï¼ˆå­ï¼‰æ¨¹çš„**æœ€å³ç«¯çµé»**ã€‚
    -   å› æ­¤ï¼šè¦ä¸æ˜¯**æ ¹ D**ï¼ˆç•¶æ ¹**æ²’æœ‰å³å­æ¨¹**ï¼‰å°±æ˜¯**æŸå€‹çµé»çš„å³å­©å­ R**ã€‚
    -   è‹¥é¡Œç›®é‚„å¼·èª¿ã€Œæœ€å¾Œç¯€é»æ˜¯**è‘‰å­**ã€ï¼Œé‚£å®ƒ**å¿…æ˜¯å³å­©å­**ï¼ˆå–®ç¯€é»å­æ¨¹é™¤å¤–ï¼‰ã€‚
-   **Pre-orderï¼ˆDLRï¼Œå…ˆåºï¼‰**
    -   **æœ€å¾Œç¯€é»**ä¸€å®šæ˜¯**è‘‰å­**ï¼ˆå› ç‚ºæ¯å€‹å…§éƒ¨çµé»è¨ªå•å¾Œï¼Œå¿…å†è¨ªå­æ¨¹ï¼‰ã€‚
    -   æ‰€ä»¥å®ƒå¿…æ˜¯æŸå€‹çˆ¶çµé»çš„**å·¦å­©å­ L æˆ–å³å­©å­ R**ï¼›åªæœ‰**å–®ç¯€é»æ¨¹**æ™‚æ‰åŒæ™‚æ˜¯ **D**ã€‚
-   **Post-orderï¼ˆLRDï¼Œå¾Œåºï¼‰**
    -   **æœ€å¾Œç¯€é»**æ°¸é æ˜¯**æ ¹ D**ï¼ˆå­æ¨¹ä¹Ÿæ˜¯å¦‚æ­¤ï¼‰ã€‚

| éæ­· | ç¬¬ä¸€å€‹ | æœ€å¾Œä¸€å€‹ |
| :--- | :--- | :--- |
| å…ˆåº DLR | æ ¹ D | å³å´ã€Œæœ€å¾Œè¢«èµ°åˆ°çš„ã€è‘‰ï¼ˆL æˆ– Rï¼›å–®ç¯€é»ä¾‹å¤–ç‚º Dï¼‰ |
| ä¸­åº LDR | æœ€å·¦ç«¯çµé» | æœ€å³ç«¯çµé»ï¼ˆæ ¹ D æˆ–æŸå€‹ Rï¼‰ |
| å¾Œåº LRD | æœ€å·¦ç«¯è‘‰ | æ ¹ D |

> è¨˜ï¼š**ä¸­åº(LDR)æœ€å¾Œï¼æœ€å³ç«¯ç¯€é»**ï¼ˆç„¡å³å­æ¨¹å‰‡ç‚ºæ ¹ï¼Œå¦å‰‡ç‚ºå³å­©å­ï¼‰ï¼›**å…ˆåº(DLR)æœ€å¾Œï¼æŸå€‹è‘‰**ï¼ˆå–®ç¯€é»ä¾‹å¤–ç‚ºæ ¹ï¼‰ï¼›**å¾Œåº(LRD)æœ€å¾Œï¼æ ¹ç¯€é»**ã€‚

### ğŸ“š äºŒã€å»£åº¦å„ªå…ˆéæ­·ï¼ˆBFSï¼šBreadth-First Searchï¼‰
ğŸ”„ **å±¤åºéæ­·ï¼ˆLevel-orderï¼‰ï¼šé€å±¤å¾å·¦åˆ°å³**
-   ä½¿ç”¨Queueå¯¦ä½œ
-   æ ¹ç¯€é»å…ˆå…¥åˆ—ï¼Œæ¯æ¬¡å‡ºåˆ—å¾Œå°‡å…¶å·¦å³å­ç¯€é»åŠ å…¥éšŠåˆ—**(ä¸­åºçš„è®Šå½¢)**

```c
void levelOrder(TreeNode* root) {
    if (root == NULL) return;
    Queue q;
    enqueue(&q, root);
    while (!isEmpty(q)) {
        TreeNode* curr = dequeue(&q);
        visit(curr);
        if (curr->left != NULL) enqueue(&q, curr->left);
        if (curr->right != NULL) enqueue(&q, curr->right);
    }
}
```

### ğŸ§© ä¸‰ã€éæ­·é †åºæ§‹å»ºäºŒå…ƒæ¨¹
-   ä¸€å®šéœ€è¦ä¸­åºåˆ¤æ–·å“ªå€‹æ˜¯root
-   åœ¨è—‰ç”±å‰/å¾Œ åºåˆ¤æ–·é †åº
**å‰åº + ä¸­åº â†’ é‡å»ºäºŒå…ƒæ¨¹ :**
```
å‰åº Preorderï¼šA B D E C F
ä¸­åº Inorderï¼šD B E A C F
```
-   å‰åºç¬¬ä¸€å€‹ï¼š**A** â†’ æ˜¯æ ¹ç¯€é»
-   A åœ¨ä¸­åºè¢«åˆ‡ç‚ºï¼š
    ```
    D B E | A | C F
    ```
-   å‰åºå°æ‡‰å·¦å­æ¨¹ï¼š`B D E`ï¼Œå³å­æ¨¹ï¼š`C F`
-   é‡è¤‡æ­¤é‚è¼¯å°å·¦å³å­æ¨¹éè¿´å»º
    ```
            A
           / \
          B   C
         / \   \
        D   E   F
    ```

---

## æ¨¹çš„æ“ä½œ
### ğŸŸ¦ ä¸€ã€åŸºæœ¬çµ±è¨ˆé¡
**âœ… 1. ç¯€é»ç¸½æ•¸ï¼ˆCountï¼‰**
```c
int Count(Node *T){
    if(T == NULL) return 0;
    else {
        int nl = Count(T->Lchild);
        int nr = Count(T->Rchild);
        return nl + nr + 1;  // åŠ ä¸Šè‡ªå·±
    }
}
```

**âœ… 2. æ¨¹é«˜ï¼ˆDepth / Heightï¼‰**
```c
int Depth(Node *T){
    if(T == NULL) return 0;
    else {
        int hl = Depth(T->Lchild);
        int hr = Depth(T->Rchild);
        return max(hl, hr) + 1;  // æ ¹ç¯€é»æ·±åº¦è¦–ç‚º1
    }
}
```

**âœ… 3. è‘‰ç¯€é»æ•¸ï¼ˆCountLeafï¼‰**
```c
int CountLeaf(Node *T){
    if (T == NULL) return 0;
    else {
        int nl = CountLeaf(T->Lchild);
        int nr = CountLeaf(T->Rchild);
        if (nl + nr == 0) return 1;  // è‡ªå·±æ˜¯è‘‰ç¯€é»
        else return nl + nr;
    }
}
```

### ğŸŸ© äºŒã€çµæ§‹æ“ä½œé¡ï¼ˆè¤‡è£½ã€æ¯”è¼ƒã€äº¤æ›ï¼‰
**âœ… 4. è¤‡è£½æ¨¹ï¼ˆCopyï¼‰**
```c
Node* Copy(Node *orig){
    Node *t = new Node();
    if (orig != NULL){
        t->data = orig->data;
        t->Lchild = Copy(orig->Lchild);
        t->Rchild = Copy(orig->Rchild);
    } else t = NULL;
    return t;
}
```

**âœ… 5. åˆ¤æ–·å…©æ£µæ¨¹æ˜¯å¦ç›¸åŒï¼ˆEqualï¼‰**
```c
bool Equal(Node* s, Node* t){
    if (s == NULL && t == NULL) return true;  // Case 1
    if (s != NULL && t != NULL) {             // Case 2
        if (s->data == t->data)
            return Equal(s->Lchild, t->Lchild) && Equal(s->Rchild, t->Rchild);
        else return false;
    }
    return false; // Case 3: æœ‰ä¸€é‚Šæ˜¯ NULL
}
```

**âœ… 6. å·¦å³å­æ¨¹äº’æ›ï¼ˆSwapï¼‰**
â¬‡ï¸ **å¾ä¸‹è€Œä¸Šï¼ˆå…ˆå·¦å³å­å†æ› rootï¼‰**
```c
void Swap(Node *T){
    if (T != NULL){
        Swap(T->Lchild);
        Swap(T->Rchild);
        Node *tmp = T->Lchild;
        T->Lchild = T->Rchild;
        T->Rchild = tmp;
    }
}
```

â¬†ï¸ **å¾ä¸Šè€Œä¸‹ï¼ˆå…ˆäº¤æ›ï¼Œå†è¨ªå• left, rightï¼‰**
```c
void Swap(Node *T){
    if (T != NULL){
        Node *tmp = T->Lchild;
        T->Lchild = T->Rchild;
        T->Rchild = tmp;
        Swap(T->Lchild);
        Swap(T->Rchild);
    }
}
```

### ğŸŸ¨ ä¸‰ã€é€²éšæ‡‰ç”¨é¡ï¼ˆè¡¨é”å¼èˆ‡éè¿´è¨ˆç®—ï¼‰

**âœ… 7. è¡¨é”å¼æ¨¹ï¼ˆExpression Treeï¼‰ç‰¹æ€§**
-   **é‹ç®—å¼ä¸­åºï¼šå·¦â†’æ ¹â†’å³ï¼ˆLDRï¼‰**
-   **è¦å‰‡ï¼š**
    -   è‘‰ç¯€é»ï¼šç‚ºæ“ä½œæ•¸ï¼ˆoperandï¼‰
    -   éè‘‰ç¯€é»ï¼šç‚ºé‹ç®—å­ï¼ˆoperatorï¼‰
    -   é‹ç®—å„ªå…ˆæ¬Šé«˜è€…ä½ç½®é ä¸‹
ğŸ“Œ **ç¯„ä¾‹ï¼š**
è¡¨é”å¼ï¼š`((A+(B*C))-(D/E))`
å°æ‡‰äºŒå…ƒæ¨¹ï¼š
```
        -
       /   \
      +     /
     / \   / \
    A   * D   E
       / \
      B   C
```

**âœ… 8. éè¿´é‹ç®—ï¼ˆExpression Tree Evaluateï¼‰**
```c
int Eval(Node *T){
    if (T == NULL) return 0;

    Eval(T->Lchild);
    Eval(T->Rchild);

    switch (T->data){
        case '+': T->Result = T->Lchild->Result + T->Rchild->Result; break;
        case '-': T->Result = T->Lchild->Result - T->Rchild->Result; break;
        case '*': T->Result = T->Lchild->Result * T->Rchild->Result; break;
        case '/': T->Result = T->Lchild->Result / T->Rchild->Result; break;
        default:  // å¦‚æœæ˜¯æ•¸å­—ç¯€é»
            T->Result = T->data;  // å‡è¨­ data æ˜¯ int é¡å‹
    }
    return T->Result;
}
```

---

## ç·šç´¢äºŒå…ƒæ¨¹

ğŸ‘‰ **ç·šç´¢äºŒå…ƒæ¨¹çš„ç›®æ¨™**ï¼š
> æŠŠé€™äº›æœ¬ä¾†æ˜¯ NULL çš„æŒ‡æ¨™ï¼Œæ”¹æ‹¿ä¾†æŒ‡å‘ä¸­åºçš„å‰é©…/å¾Œç¹¼ï¼Œæå‡éæ­·æ•ˆç‡ã€‚

### çµæ§‹
```c
typedef struct ThreadNode {
    int data;
    struct ThreadNode *lchild, *rchild;
    int ltag, rtag;  // ç·šç´¢æ¨™è¨˜
} ThreadNode;
```
![Thread.png](assets/5bed3507-d600-45da-81fc-3710d67db284.png)

### æ¼”ç®—æ³•
```
CreateInThread(T)          // èµ·é»ï¼šå•Ÿå‹•æ•´é«”ç·šç´¢åŒ–æµç¨‹
   â””â”€â”€ InThread(T)         // éè¿´ï¼šä¸­åºéæ­· T
         â”œâ”€â”€ InThread(T->lchild)     // å…ˆè™•ç†å·¦å­æ¨¹
         â”œâ”€â”€ Visit(T)                // ä¸­åºè¨ªå•ç•¶å‰ç¯€é»ï¼Œå»ºç«‹ç·šç´¢
         â””â”€â”€ InThread(T->rchild)     // å†è™•ç†å³å­æ¨¹
```
```c
// ====== ä¸­åºç·šç´¢åŒ–è™•ç†ï¼ˆä¸»å‡½å¼ï¼‰ ======
void CreateInThread(ThreadTree T) {
    pre = NULL;
    if (T != NULL) {
        InThread(T);
        if (pre != NULL && pre->rchild == NULL) {
            pre->rtag = 1;  // æœ€å¾Œä¸€å€‹ç¯€é»è£œå³ç·šç´¢
        }
    }
}

// ====== éè¿´ç·šç´¢åŒ–å­ç¨‹åº ======
void InThread(ThreadTree T) {
    if (T != NULL) {
        InThread(T->lchild);      // éæ­·å·¦å­æ¨¹
        Visit(T);                 // è™•ç†ç•¶å‰ç¯€é»
        InThread(T->rchild);      // éæ­·å³å­æ¨¹
    }
}

// ====== ç·šç´¢å»ºç«‹å‡½å¼ï¼ˆæ ¸å¿ƒï¼‰ ======
void Visit(ThreadTree q) {
    // å·¦å­ç‚ºç©º â†’ è¨­å‰é©…
    if (q->lchild == NULL) {
        q->ltag = 1;
        q->lchild = pre;
    }

    // å‰é©…ç¯€é»å³å­ç‚ºç©º â†’ è¨­å¾Œç¹¼
    if (pre != NULL && pre->rchild == NULL) {
        pre->rtag = 1;
        pre->rchild = q;
    }

    pre = q; // æ›´æ–°å‰é©…
}
```
![image.png](assets/image%2012.png)


### Morris Traversal

## Morris Traversal æ¼”ç®—æ³•å‹•ç•«æ¨¡æ“¬ 

```dataviewjs
// 1. å°‡æ‰€æœ‰çš„ HTML/React/Tailwind ä»£ç¢¼å°è£åœ¨ä¸€å€‹å­—ä¸²ä¸­
const htmlCode = `
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { margin: 0; background: transparent; font-family: sans-serif; overflow: hidden; }
        /* Custom Scrollbar for Logs */
        .scrollbar-thin::-webkit-scrollbar { width: 6px; }
        .scrollbar-thin::-webkit-scrollbar-track { background: #171717; }
        .scrollbar-thin::-webkit-scrollbar-thumb { background: #404040; border-radius: 3px; }
    </style>
</head>
<body class="bg-white">
    <div id="root" class="w-full h-full p-2"></div>
    <script type="text/babel">
        const { useState, useEffect, useMemo } = React;

        // Simple Icon Replacements (Lucide icons are not available in standalone babel)
        const Play = ({size}) => <span style={{fontSize: size || 16, display:'inline-block', lineHeight: 1}}>â–¶</span>;
        const Pause = ({size}) => <span style={{fontSize: size || 16, display:'inline-block', lineHeight: 1}}>â¸</span>;
        const SkipForward = ({size}) => <span style={{fontSize: size || 16, display:'inline-block', lineHeight: 1}}>â­</span>;
        const RotateCcw = ({size}) => <span style={{fontSize: size || 16, display:'inline-block', lineHeight: 1}}>â†º</span>;
        const Info = ({size}) => <span style={{fontSize: size || 16, display:'inline-block', lineHeight: 1, fontWeight:'bold'}}>i</span>;
        const CheckCircle2 = ({size}) => <span style={{fontSize: size || 16, display:'inline-block', lineHeight: 1}}>âœ“</span>;

        // å®šç¾©åˆå§‹æ¨¹çµæ§‹
        const INITIAL_TREE = {
          id: '1',
          val: 1,
          left: {
            id: '2',
            val: 2,
            left: { id: '4', val: 4, left: null, right: null },
            right: { id: '5', val: 5, left: null, right: null }
          },
          right: {
            id: '3',
            val: 3,
            left: null,
            right: { id: '6', val: 6, left: null, right: null }
          }
        };

        const App = () => {
          const [currentId, setCurrentId] = useState(null);
          const [predecessorId, setPredecessorId] = useState(null);
          const [threads, setThreads] = useState([]);
          const [traversalResult, setTraversalResult] = useState([]);
          const [logs, setLogs] = useState([]);
          const [isPlaying, setIsPlaying] = useState(false);
          const [stepIndex, setStepIndex] = useState(-1);

          // é å…ˆè¨ˆç®—æ¼”ç®—æ³•çš„æ‰€æœ‰æ­¥é©Ÿå¿«ç…§
          const steps = useMemo(() => {
            const s = [];
            const res = [];
            let curThreads = [];
            
            const findNodeById = (root, id) => {
              if (!root) return null;
              if (root.id === id) return root;
              return findNodeById(root.left, id) || findNodeById(root.right, id);
            };

            const getRight = (node, tList) => {
              const thread = tList.find(t => t.from === node.id);
              if (thread) return findNodeById(INITIAL_TREE, thread.to);
              return node.right;
            };

            let curr = INITIAL_TREE;
            while (curr !== null) {
              s.push({
                type: 'CHECK',
                curr: curr.id,
                pre: null,
                threads: [...curThreads],
                res: [...res],
                msg: \`ç•¶å‰ç¯€é»æ˜¯ \${curr.val}ã€‚æª¢æŸ¥æ˜¯å¦æœ‰å·¦å­æ¨¹ã€‚\`
              });

              if (curr.left === null) {
                res.push(curr.val);
                s.push({
                  type: 'VISIT',
                  curr: curr.id,
                  pre: null,
                  threads: [...curThreads],
                  res: [...res],
                  msg: \`\${curr.val} æ²’æœ‰å·¦å­æ¨¹ã€‚è¨ªå•è©²ç¯€é»ï¼Œä¸¦ç§»è‡³å³å­æ¨¹ã€‚\`
                });
                curr = getRight(curr, curThreads);
              } else {
                let pre = curr.left;
                s.push({
                  type: 'FIND_PRE',
                  curr: curr.id,
                  pre: pre.id,
                  threads: [...curThreads],
                  res: [...res],
                  msg: \`å°‹æ‰¾ \${curr.val} çš„å‰é©…ç¯€é»ï¼ˆå·¦å­æ¨¹çš„æœ€å³ç¯€é»ï¼‰ã€‚\`
                });

                while (getRight(pre, curThreads) !== null && getRight(pre, curThreads).id !== curr.id) {
                  pre = getRight(pre, curThreads);
                }

                if (getRight(pre, curThreads) === null) {
                  curThreads.push({ from: pre.id, to: curr.id });
                  s.push({
                    type: 'ADD_THREAD',
                    curr: curr.id,
                    pre: pre.id,
                    threads: [...curThreads],
                    res: [...res],
                    msg: \`å‰é©…ç¯€é» \${pre.val} çš„å³æŒ‡é‡ç‚ºç©ºã€‚å»ºç«‹ç·šç´¢æŒ‡å‘ \${curr.val}ï¼Œé€²å…¥å·¦å­æ¨¹ã€‚\`
                  });
                  curr = curr.left;
                } else {
                  curThreads = curThreads.filter(t => !(t.from === pre.id && t.to === curr.id));
                  res.push(curr.val);
                  s.push({
                    type: 'REMOVE_THREAD',
                    curr: curr.id,
                    pre: pre.id,
                    threads: [...curThreads],
                    res: [...res],
                    msg: \`å‰é©…ç¯€é» \${pre.val} å·²æœ‰ç·šç´¢ã€‚æ–·é–‹ç·šç´¢ï¼Œè¨ªå• \${curr.val}ï¼Œä¸¦ç§»è‡³å³å­æ¨¹ã€‚\`
                  });
                  curr = getRight(curr, curThreads);
                }
              }
            }
            s.push({ type: 'DONE', curr: null, pre: null, threads: [], res: [...res], msg: "éæ­·å®Œæˆï¼" });
            return s;
          }, []);

          useEffect(() => {
            let timer;
            if (isPlaying && stepIndex < steps.length - 1) {
              timer = setTimeout(() => {
                handleNext();
              }, 1000);
            } else {
              setIsPlaying(false);
            }
            return () => clearTimeout(timer);
          }, [isPlaying, stepIndex]);

          const handleNext = () => {
            if (stepIndex < steps.length - 1) {
              const nextIdx = stepIndex + 1;
              const step = steps[nextIdx];
              setStepIndex(nextIdx);
              setCurrentId(step.curr);
              setPredecessorId(step.pre);
              setThreads(step.threads);
              setTraversalResult(step.res);
              setLogs(prev => [step.msg, ...prev].slice(0, 5));
            }
          };

          const handleReset = () => {
            setStepIndex(-1);
            setCurrentId(null);
            setPredecessorId(null);
            setThreads([]);
            setTraversalResult([]);
            setLogs([]);
            setIsPlaying(false);
          };

          const nodePositions = useMemo(() => {
            const pos = {};
            const calculate = (node, x, y, dx) => {
              if (!node) return;
              pos[node.id] = { x, y, val: node.val };
              calculate(node.left, x - dx, y + 60, dx / 1.7);
              calculate(node.right, x + dx, y + 60, dx / 1.7);
            };
            calculate(INITIAL_TREE, 200, 40, 100);
            return pos;
          }, []);

          return (
            <div className="flex flex-col h-full bg-neutral-50 p-6 font-sans text-neutral-800 rounded-xl border border-neutral-200 shadow-sm overflow-auto">
              <div className="flex items-center justify-between mb-6">
                <div>
                  <h1 className="text-xl font-bold text-neutral-900">Morris Traversal è¦–è¦ºåŒ–</h1>
                  <p className="text-neutral-500 text-sm">ç©ºé–“è¤‡é›œåº¦ O(1) çš„ä¸­åºéæ­·æ¨¡æ“¬</p>
                </div>
                <div className="flex space-x-2">
                  <button
                    onClick={() => setIsPlaying(!isPlaying)}
                    className={'flex items-center space-x-2 px-4 py-2 rounded-lg transition ' + (isPlaying ? 'bg-amber-500 text-white' : 'bg-blue-600 text-white hover:bg-blue-700')}
                  >
                    {isPlaying ? <Pause size={18} /> : <Play size={18} />}
                    <span>{isPlaying ? 'æš«åœ' : 'è‡ªå‹•æ’­æ”¾'}</span>
                  </button>
                  <button
                    onClick={handleNext}
                    disabled={isPlaying || stepIndex >= steps.length - 1}
                    className="flex items-center space-x-2 px-4 py-2 bg-neutral-200 text-neutral-700 rounded-lg hover:bg-neutral-300 disabled:opacity-50"
                  >
                    <SkipForward size={18} />
                    <span>ä¸‹ä¸€æ­¥</span>
                  </button>
                  <button
                    onClick={handleReset}
                    className="flex items-center space-x-2 px-4 py-2 border border-neutral-300 rounded-lg hover:bg-white transition"
                  >
                    <RotateCcw size={18} />
                  </button>
                </div>
              </div>

              <div className="grid grid-cols-1 lg:grid-cols-3 gap-6 flex-1">
                <div className="lg:col-span-2 bg-white rounded-xl border border-neutral-200 p-4 flex flex-col items-center justify-center relative overflow-hidden h-[300px]">
                  <svg width="400" height="300" viewBox="0 0 400 300" className="drop-shadow-sm">
                    {Object.entries(INITIAL_TREE).map(() => {
                      const drawLines = (node) => {
                        if (!node) return null;
                        const lines = [];
                        if (node.left) {
                          const p1 = nodePositions[node.id];
                          const p2 = nodePositions[node.left.id];
                          lines.push(<line key={'l-' + node.id} x1={p1.x} y1={p1.y} x2={p2.x} y2={p2.y} stroke="#e5e5e5" strokeWidth="2" />);
                        }
                        if (node.right) {
                          const p1 = nodePositions[node.id];
                          const p2 = nodePositions[node.right.id];
                          lines.push(<line key={'r-' + node.id} x1={p1.x} y1={p1.y} x2={p2.x} y2={p2.y} stroke="#e5e5e5" strokeWidth="2" />);
                        }
                        return [...lines, drawLines(node.left), drawLines(node.right)];
                      };
                      return drawLines(INITIAL_TREE);
                    })}

                    {threads.map((t, i) => {
                      const start = nodePositions[t.from];
                      const end = nodePositions[t.to];
                      const cx = Math.max(start.x, end.x) + 40;
                      const cy = (start.y + end.y) / 2;
                      return (
                        <path
                          key={'thread-' + i}
                          d={'M ' + start.x + ' ' + start.y + ' Q ' + cx + ' ' + cy + ' ' + end.x + ' ' + end.y}
                          fill="none"
                          stroke="#10b981"
                          strokeWidth="2"
                          strokeDasharray="4"
                          className="animate-pulse"
                        />
                      );
                    })}

                    {Object.values(nodePositions).map((pos) => {
                      const isCurr = currentId === Object.keys(nodePositions).find(key => nodePositions[key] === pos);
                      const isPre = predecessorId === Object.keys(nodePositions).find(key => nodePositions[key] === pos);
                      return (
                        <g key={pos.val}>
                          <circle
                            cx={pos.x}
                            cy={pos.y}
                            r="18"
                            className="transition-all duration-500"
                            fill={isCurr ? '#3b82f6' : isPre ? '#f59e0b' : '#fff'}
                            stroke={isCurr ? '#2563eb' : isPre ? '#d97706' : '#d4d4d4'}
                            strokeWidth="2"
                          />
                          <text
                            x={pos.x}
                            y={pos.y}
                            dy="5"
                            textAnchor="middle"
                            className={'text-xs font-bold transition-colors ' + (isCurr || isPre ? 'fill-white' : 'fill-neutral-600')}
                          >
                            {pos.val}
                          </text>
                        </g>
                      );
                    })}
                  </svg>
                  
                  <div className="absolute bottom-4 left-4 flex flex-col space-y-1">
                    <div className="flex items-center space-x-2 text-[10px] text-neutral-500">
                      <div className="w-3 h-3 bg-blue-500 rounded-full" /> <span>ç•¶å‰ç¯€é» (Current)</span>
                    </div>
                    <div className="flex items-center space-x-2 text-[10px] text-neutral-500">
                      <div className="w-3 h-3 bg-amber-500 rounded-full" /> <span>å‰é©…ç¯€é» (Predecessor)</span>
                    </div>
                    <div className="flex items-center space-x-2 text-[10px] text-neutral-500">
                      <div className="w-3 h-1 bg-green-500 border-t border-dashed" /> <span>è‡¨æ™‚ç·šç´¢ (Thread)</span>
                    </div>
                  </div>
                </div>

                <div className="flex flex-col space-y-4">
                  <div className="bg-neutral-900 rounded-xl p-4 shadow-lg min-h-[160px] max-h-[160px] overflow-y-auto scrollbar-thin">
                    <h3 className="text-neutral-400 text-xs font-mono mb-2 uppercase tracking-wider">åŸ·è¡Œæ—¥èªŒ (Logs)</h3>
                    <div className="space-y-2">
                      {logs.length > 0 ? (
                        logs.map((log, i) => (
                          <div key={i} className={'text-sm font-mono leading-tight ' + (i === 0 ? 'text-green-400' : 'text-neutral-500')}>
                            {i === 0 ? '> ' : '  '}{log}
                          </div>
                        ))
                      ) : (
                        <div className="text-neutral-600 italic text-sm font-mono">ç­‰å¾…é–‹å§‹...</div>
                      )}
                    </div>
                  </div>

                  <div className="bg-white rounded-xl border border-neutral-200 p-4 flex-1">
                    <h3 className="flex items-center space-x-2 text-sm font-bold mb-4">
                      <CheckCircle2 size={16} />
                      <span>ä¸­åºéæ­·çµæœ (Result)</span>
                    </h3>
                    <div className="flex flex-wrap gap-2">
                      {traversalResult.length > 0 ? (
                        traversalResult.map((v, i) => (
                          <span key={i} className="px-3 py-1 bg-green-50 text-green-700 rounded-md font-mono font-bold">
                            {v}
                          </span>
                        ))
                      ) : (
                        <span className="text-neutral-300 italic text-xs">æš«ç„¡è¼¸å‡º</span>
                      )}
                    </div>
                  </div>
                </div>
              </div>
              
              <div className="mt-6 flex items-start space-x-3 p-4 bg-blue-50 border border-blue-100 rounded-lg">
                <Info size={20} />
                <div className="text-xs text-blue-800 leading-relaxed">
                  <p className="font-bold mb-1">Morris Traversal æ ¸å¿ƒåŸç†ï¼š</p>
                  ç•¶æˆ‘å€‘éæ­·åˆ°å·¦å­æ¨¹çš„æœ€å³ç¯€é»æ™‚ï¼Œç™¼ç¾å®ƒçš„å³æŒ‡é‡ç‚ºç©ºã€‚é€™å°±æ˜¯ã€Œæµªè²»ã€çš„ç©ºé–“ã€‚æˆ‘å€‘å°‡å®ƒæš«æ™‚æŒ‡å‘ç•¶å‰ç¯€é»ï¼Œé€™æ¨£éæ­·å®Œå·¦å­æ¨¹å¾Œï¼Œæˆ‘å€‘å°±èƒ½é †è‘—é€™å€‹ã€Œç·šç´¢ã€å›åˆ°çˆ¶ç¯€é»ï¼Œè€Œä¸éœ€è¦ä½¿ç”¨æ£§ã€‚
                </div>
              </div>
            </div>
          );

        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
`;

// Render using iframe directly in DataviewJS
dv.el("iframe", "", {
    attr: {
        srcdoc: htmlCode,
        style: "width: 100%; height: 600px; border: none; border-radius: 12px; background: white;"
    }
});
```


# ä¸‰ã€éœå¤«æ›¼æ¨¹ï¼ˆHuffman Treeï¼‰â€” æœ€å„ªäºŒå‰æ¨¹
## ä¸€ã€å®šç¾©
**éœå¤«æ›¼æ¨¹**æ˜¯å¸¶**æ¬Šé‡çš„æœ€å„ªäºŒå…ƒæ¨¹**ï¼Œåˆç¨±**æœ€å„ªäºŒå‰æ¨¹ï¼ˆOptimal Binary Treeï¼‰**ã€‚
> å®ƒå¯ä»¥è®“å¸¶æ¬Šè·¯å¾‘é•·åº¦ï¼ˆWPLï¼‰æœ€å°ï¼Œæ˜¯ä¸€ç¨®å¸¸è¦‹æ–¼**è³‡æ–™å£“ç¸®ï¼ˆå¦‚å­—å…ƒç·¨ç¢¼ï¼‰**çš„çµæ§‹ã€‚

## äºŒã€åŸºæœ¬æ¦‚å¿µ
-   **ç¯€é»çš„æ¬Šé‡**ï¼šé€šå¸¸è¡¨ç¤ºå­—å…ƒå‡ºç¾çš„é »ç‡ã€‚
-   **WPLï¼ˆåŠ æ¬Šè·¯å¾‘é•·åº¦ï¼‰**ï¼š
    $\text{WPL} = \sum_{i=1}^{n}ï¼ˆ\text{è‘‰ç¯€é»æ¬Šé‡} Ã— \text{è·¯å¾‘é•·åº¦}ï¼‰$
-   **æœ€å° WPL** â‡’ æœ€çœç©ºé–“çš„ç·¨ç¢¼æ¨¹ï¼
## ä¸‰ã€æ§‹é€ æ­¥é©Ÿï¼ˆéœå¤«æ›¼æ¼”ç®—æ³•ï¼‰
1.  å°‡æ‰€æœ‰å­—å…ƒï¼ˆç¯€é»ï¼‰ä¾**é »ç‡ï¼ˆæ¬Šé‡ï¼‰**å»ºç«‹æˆä¸€å€‹æ£®æ—ï¼ˆå¤šæ£µå–®ç¯€é»æ¨¹ï¼‰
2.  å¾æ£®æ—ä¸­é¸å‡º**å…©æ£µæœ€å°æ¬Šé‡æ¨¹**
3.  åˆä½µæˆä¸€æ£µæ–°æ¨¹ï¼Œå…¶æ ¹ç¯€é»æ¬Šé‡ç‚ºå…©æ£µå­æ¨¹æ¬Šé‡ä¹‹å’Œ
4.  é‡è¤‡æ­¥é©Ÿ 2~3ï¼Œç›´åˆ°åªå‰©ä¸€æ£µæ¨¹ï¼ˆåˆä½µn-1æ¬¡ï¼‰
## å››ã€éœå¤«æ›¼ç·¨ç¢¼ç‰¹æ€§
-   **å‰ç¶´ç·¨ç¢¼**ï¼šç„¡ä»»ä¸€ç·¨ç¢¼æ˜¯å…¶ä»–ç·¨ç¢¼çš„å‰ç¶´ï¼Œé¿å…è§£ç¢¼æ­§ç¾©ã€‚
-   **è·¯å¾‘å·¦é‚Šç·¨ 0ï¼Œå³é‚Šç·¨ 1**ï¼ˆæˆ–åä¹‹ï¼‰
-   å‡ºç¾æ¬¡æ•¸è¶Šé«˜ â†’ ç·¨ç¢¼è¶ŠçŸ­ï¼ˆç¯€çœç©ºé–“ï¼‰
## äº”ã€èˆ‰ä¾‹
![image.png](assets/image%2013.png)

---

# å››ã€ä¸¦æŸ¥é›†ï¼ˆUnion-Find Setï¼‰ä»‹ç´¹
## ä¸€ã€ç”¨é€”èˆ‡æ¦‚å¿µ
> ä¸¦æŸ¥é›†æ˜¯ä¸€ç¨®ç”¨ä¾†è™•ç†é›†åˆåˆä½µèˆ‡æŸ¥è©¢çš„è³‡æ–™çµæ§‹ï¼Œç‰¹åˆ¥é©åˆè§£æ±ºï¼š
> -   åˆ¤æ–·å…ƒç´ æ˜¯å¦åœ¨åŒä¸€é›†åˆ
> -   å‹•æ…‹åˆä½µå…©é›†åˆ
ğŸ“Œ **å¸¸è¦‹æ‡‰ç”¨**ï¼š
| å•é¡Œé¡å‹ | æ‡‰ç”¨èªªæ˜ |
| :--- | :--- |
| ç¶²è·¯é€£é€šæ€§ | åˆ¤æ–·å…©é»æ˜¯å¦å·²é€£é€š |
| åœ–çš„ç’°åˆ¤å®š | Kruskal æœ€å°ç”Ÿæˆæ¨¹ |
| ç¾¤é«”åŠƒåˆ† | åˆ¤æ–·æŸäº›äººæ˜¯å¦å±¬æ–¼åŒä¸€ç¾¤ |
| ç­‰åƒ¹é¡å•é¡Œ | åŒä¸€é›†åˆä»£è¡¨åŒä¸€é¡åˆ¥ |

## ğŸ§© äºŒã€ä¸‰å¤§åŸºæœ¬æ“ä½œ
1ï¸âƒ£ **`MakeSet(x)`**
ç‚ºå…ƒç´  `x` å»ºç«‹ä¸€å€‹æ–°é›†åˆï¼Œåˆå§‹æ™‚æ¯å€‹å…ƒç´ éƒ½æ˜¯è‡ªå·±çš„ä»£è¡¨ï¼ˆparentï¼‰ã€‚
2ï¸âƒ£ **`Find(x)`**
æŸ¥è©¢ `x` æ‰€å±¬é›†åˆçš„ä»£è¡¨å…ƒç´ ï¼ˆåˆç¨±ç‚ºã€Œæ ¹ã€ï¼‰ï¼Œå›å‚³ç¯€é»ä¸‹æ¨™ã€‚æ”¯æ´ **è·¯å¾‘å£“ç¸®ï¼ˆPath Compressionï¼‰** åŠ é€Ÿæœªä¾†æŸ¥è©¢ã€‚
3ï¸âƒ£ **`Union(x, y)`**
åˆä½µ `x` å’Œ `y` æ‰€å±¬é›†åˆã€‚å¯ä½¿ç”¨ **æŒ‰ç§©åˆä½µï¼ˆUnion by Rank / Sizeï¼‰** æ¸›å°‘æ¨¹é«˜ã€‚

## ğŸ§± ä¸‰ã€è³‡æ–™çµæ§‹è¨­è¨ˆ
```c
int parent[N];  // parent[i]ï¼šç¯€é» i çš„çˆ¶ç¯€é»
int rank[N];    // rank[i]ï¼šç¯€é» i æ‰€åœ¨é›†åˆçš„é«˜åº¦ï¼ˆæˆ–ç¯€é»æ•¸ï¼‰
```

## âœï¸ å››ã€Cèªè¨€ç°¡æ˜“å¯¦ä½œç¯„ä¾‹
```c
// åˆå§‹åŒ– n å€‹é›†åˆ
void MakeSet(int n) {
    for (int i = 0; i < n; i++) {
        parent[i] = i;
        rank[i] = 0;
    }
}

// æŸ¥è©¢ä»£è¡¨å…ƒç´ ï¼ˆå¸¶è·¯å¾‘å£“ç¸®ï¼‰
int Find(int x) {
    if (parent[x] != x)
        parent[x] = Find(parent[x]);  // å£“ç¸®è·¯å¾‘
    return parent[x];
}

// åˆä½µå…©é›†åˆï¼ˆæŒ‰ç§©åˆä½µï¼‰
void Union(int x, int y) {
    int fx = Find(x);
    int fy = Find(y);
    if (fx == fy) return;

    if (rank[fx] < rank[fy]) {
        parent[fx] = fy;
    } else {
        parent[fy] = fx;
        if (rank[fx] == rank[fy])
            rank[fx]++;
    }
}
```
![image.png](assets/image%2014.png)

## âš¡ äº”ã€æ™‚é–“è¤‡é›œåº¦åˆ†æ
![disjoinset.png](assets/disjoinset.png)
-   å„ªåŒ–å¾Œæ¯æ¬¡æ“ä½œå¹¾ä¹æ˜¯**å¸¸æ•¸æ™‚é–“ O(Î±(n))**ï¼ˆÎ± ç‚ºé˜¿å…‹æ›¼å‡½æ•¸çš„åå‡½æ•¸ï¼Œå¯¦éš›ä¸Šéå¸¸å°ï¼‰ã€‚

## ğŸ“ å°çµ
| æ“ä½œ | åŠŸèƒ½ | åŠ é€ŸæŠ€è¡“ |
| :--- | :--- | :--- |
| MakeSet | åˆå§‹åŒ–é›†åˆ | - |
| Find | æŸ¥ä»£è¡¨å…ƒç´  | è·¯å¾‘å£“ç¸® |
| Union | åˆä½µå…©é›†åˆ | æŒ‰ç§©åˆä½µ |

---

# è§€å¿µç¸½çµ &éŒ¯èª¤é¡Œå›é¡§

1.  **æ¨¹çš„ç¯€é»é—œä¿‚**
    -   æœ‰æ ¹æ¨¹ï¼šé‚Šæ•¸ (E=N-1)ï¼Œå› æ­¤(ç¯€é»ç¸½æ•¸=ç¸½åº¦æ•¸+1) $(\sum \text{outdeg}(v)=N-1)$ ã€‚
    -   $n_0=n_2+1ï¼ˆè‘‰å­=åº¦ç‚º 2 çš„çµé»æ•¸+1ï¼‰$ã€‚
2.  **å®Œå…¨äºŒå‰æ¨¹ quick factsï¼ˆé«˜åº¦ (h)=å±¤æ•¸ï¼‰**
    -   æ‰€æœ‰è‘‰çµé»åªå¯èƒ½è½åœ¨ **ç¬¬ (h-1)** æˆ– **ç¬¬ (h)** å±¤ã€‚
    -   å‰ (h-1) å±¤å¿…ç‚º**æ»¿äºŒå‰æ¨¹**ã€‚
3.  **å–„ç”¨ç´¢å¼•ï¼ˆçˆ¶å­é—œä¿‚ï¼‰**
    -   Må‰æ¨¹ä¸­ Parent = âŒˆindex / M=âŒ‰
4.  **m å‰éˆçš„ç©ºæŒ‡æ¨™è¦æœƒæ¨å°**
    ä»¥äºŒå‰ç‚ºä¾‹:ç¸½å…±æœ‰2nå€‹æŒ‡æ¨™ï¼Œ[åˆæ¯å€‹ç¯€é»éƒ½æ˜¯ç”±ä¸€æ¢é‚Šæ‰€é€£ç·š(é™¤äº†ROOT)](æ¨¹.md) â†’2n-(n-1)=n+1 å€‹ ç©ºæŒ‡æ¨™
5.  **é †åºå­˜å„²è¦æœƒç•«**
    ```
    idx|0|1|2|3|4|5|6|7|8|9|10|11|12
    val|a|b|C| |d|e|f| | |g|  |  | h

    						a
    					/   \
    				   b	 c
    			      / \   / \
    		         d   e f
                    / \ / \ / \
                       g       h
    ```
6.  **ä¸­åºæ’åˆ—çš„é †åº Swap(Lchlid,Rchlid) å¾Œæœƒå¾—åˆ°ååº**
    ```
          2                     2
         / \                   / \
        1   3      swap(1,3) 3    1
     			   \              /
    			    4            4
    inorder:1234   			   inorder:4321
    ```
7.  **æ£®æ—çš„å¾Œæ ¹éæ­·=ä¸­åºéæ­·**
8.  **å­©å­å…„å¼Ÿè¡¨ç¤ºæ³•ä¸­ **ç©ºå³æŒ‡æ¨™æ•¸**=mï¼ˆéè‘‰ç¯€é»çµ„+1ï¼‰**
    - n å€‹éè‘‰æœƒæœ‰ n â€œçµ„â€ å­©å­ â€” nçµ„å­©å­çš„æœ€å¾Œä¸€å€‹(æœ€å³)çµé» éƒ½æœ‰**ç©ºå³**
    - åˆ æœ€å¾Œä¸€å€‹æ ¹çµé» ä¹Ÿæœ‰ä¸€å€‹**å³ç©º**
    - **â†’** n+1

![image.png](assets/image%2015.png)
![image.png](assets/image%2016.png)
![image.png](assets/image%2017.png)
![image.png](assets/image%2018.png)
![image.png](assets/image%2019.png)
![image.png](assets/image%2020.png)
![image.png](assets/image%2021.png)
![image.png](assets/image%2022.png)
![image.png](assets/image%2023.png)
![image.png](assets/image%2024.png)
![image.png](assets/image%2025.png)
![image.png](assets/image%2026.png)
![image.png](assets/image%2027.png)
![image.png](assets/image%2028.png)
![image.png](assets/image%2029.png)
![image.png](assets/image%2030.png)

---

## ğŸŒ² æ¨¹çš„æ•¸å­¸æ€§è³ªï¼šç¯€é»èˆ‡åº¦æ•¸é—œä¿‚
ğŸ·ï¸ æ¨™ç±¤: #æ•¸æ“šçµæ§‹ #æ¨¹ #è€ƒç ”ç­†è¨˜ #ç®—æ³•

ğŸ“ **æ ¸å¿ƒå®šç†ï¼š$m$ å‰æ¨¹çš„ç¯€é»å¹³è¡¡**
åœ¨ä»»æ„ä¸€æ£µåº¦ç‚º $m$ çš„æ¨¹ä¸­ï¼Œè‘‰å­ç¯€é»æ•¸ $n_0$ èˆ‡å…¶ä»–åº¦æ•¸ç¯€é»çš„é—œä¿‚éµå¾ªä»¥ä¸‹æ¨å°ã€‚

**1. åŸºç¤å…¬å¼**
æ ¹æ“šå®šç¾©èˆ‡å¹¾ä½•çµæ§‹ï¼Œæˆ‘å€‘å¯ä»¥åˆ—å‡ºå…©å€‹ç­‰å¼ï¼š
-   **ç­‰å¼ Aï¼ˆç¯€é»çµ„æˆï¼‰**: ç¸½ç¯€é»æ•¸ $N$ æ˜¯æ‰€æœ‰ä¸åŒåº¦æ•¸ç¯€é»çš„ç¸½å’Œã€‚
    $$N = n_0 + n_1 + n_2 + n_3 + \dots + n_m$$
-   **ç­‰å¼ Bï¼ˆé‚Šçš„è¨ˆæ•¸ï¼‰**: ç¸½ç¯€é»æ•¸ $N$ ç­‰æ–¼ç¸½é‚Šæ•¸åŠ  $1$ï¼ˆå› ç‚ºæ ¹ç¯€é»ä¸Šæ–¹æ²’æœ‰é‚Šï¼‰ã€‚
    $$N = (\text{ç¸½åº¦æ•¸}) + 1 = (1 \cdot n_1 + 2 \cdot n_2 + 3 \cdot n_3 + \dots + m \cdot n_m) + 1$$

**2. é€šç”¨å…¬å¼æ¨å°**
å°‡ä¸Šè¿°å…©å€‹ç­‰å¼è¯ç«‹ï¼š
$$n_0 + n_1 + n_2 + \dots + n_m = (n_1 + 2n_2 + 3n_3 + \dots + m n_m) + 1$$
æ¶ˆå»å…©é‚Šé‡è¤‡çš„ $n_1$ ä¸¦ç§»é …ï¼Œå¾—åˆ° è‘‰å­ç¯€é» $n_0$ çš„é€šç”¨æ±‚æ³•ï¼š

[!IMPORTANT] é€šç”¨çµè«–
$$n_0 = 1 + n_2 + 2n_3 + 3n_4 + \dots + (m-1)n_m$$

ğŸ” **å¯¦ä¾‹è§£æï¼šä½ çš„ç­†è¨˜å…§å®¹**
æ ¹æ“šä½ çš„ç­†è¨˜æˆªåœ– `1000002223.jpg`ï¼Œçµ¦å‡ºäº†ä¸€å€‹å…·é«”ç­‰å¼ï¼š
-   **å·²çŸ¥æ¢ä»¶**ï¼š $n_1 + 2n_2 + 3n_3 + 4n_4 = 122$
-   **æ­¥é©Ÿ 1ï¼šæ±‚ç¸½ç¯€é»æ•¸ $N$**
    æ ¹æ“š ç­‰å¼ Bï¼Œ$N = (\text{ç¸½åº¦æ•¸}) + 1$ã€‚
    ä»£å…¥æ•¸æ“šï¼š$N = 122 + 1 = 123$ã€‚
-   **æ­¥é©Ÿ 2ï¼šæ±‚è‘‰å­ç¯€é» $n_0$**
    æ ¹æ“š ç­‰å¼ Aï¼š$N = n_0 + n_1 + n_2 + n_3 + n_4$ã€‚
    è‹¥é¡Œç›®çµ¦å‡ºäº† $n_1, n_2, n_3, n_4$ çš„å…·é«”å€¼ï¼Œå³å¯æ±‚å‡º $n_0$ã€‚
    æˆ–è€…åˆ©ç”¨æ¨å°å…¬å¼ï¼š$n_0 = 1 + n_2 + 2n_3 + 3n_4$ã€‚

ğŸ’¡ **å¿«é€Ÿå°æ¯”è¡¨**
| æ¨¹é¡å‹ | æ ¸å¿ƒé—œä¿‚å¼ | å‚™è¨» |
| :--- | :--- | :--- |
| **äºŒå‰æ¨¹** | $n_0 = n_2 + 1$ | è€ƒé »æœ€é«˜ |
| **ä¸‰å‰æ¨¹** | $n_0 = 1 + n_2 + 2n_3$ | $n_1$ æ°¸é æœƒè¢«æ¶ˆæ‰ |
| **$m$ å‰æ¨¹** | $n_0 = 1 + \sum_{i=2}^{m} (i-1)n_i$ | è¬èƒ½å…¬å¼ |

ğŸš© **æ˜“éŒ¯é»æé†’**
-   **$n_1$ çš„é™·é˜±**ï¼šåœ¨æ¨å° $n_0$ èˆ‡å…¶ä»–åº¦æ•¸é—œä¿‚æ™‚ï¼Œ$n_1$ï¼ˆåº¦ç‚º 1 çš„ç¯€é»ï¼‰ç¸½æ˜¯è¢«æ¶ˆå»çš„ï¼Œå®ƒä¸å½±éŸ¿è‘‰å­ç¯€é»çš„æ•¸é‡ï¼Œä½†æœƒå½±éŸ¿ç¸½ç¯€é»æ•¸ $N$ã€‚
-   **å®Œå…¨äºŒå‰æ¨¹**ï¼šåœ¨å®Œå…¨äºŒå‰æ¨¹ä¸­ï¼Œ$n_1$ åªèƒ½æ˜¯ $0$ æˆ– $1$ï¼Œé€™å¸¸ç”¨æ–¼æ±‚ç¯€é»æ•¸çš„æœ€å€¼å•é¡Œï¼ˆå¦‚ç¬¬ 16 é¡Œï¼‰ã€‚

**ç›¸é—œé¡Œç›®æ¨è–¦ï¼š**
-   [[2024çµ±è€ƒçœŸé¡Œ-16]]ï¼šè€ƒå¯Ÿå®Œå…¨äºŒå‰æ¨¹æœ€å¤§ç¯€é»æ•¸è¨ˆç®—ã€‚